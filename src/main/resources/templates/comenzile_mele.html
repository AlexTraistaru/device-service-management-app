<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Comenzile mele</title>
</head>
<body style="font-family: Arial; background:#f2f2f2;">

<div style="width: 900px; margin: 50px auto; background:white; padding:22px; border-radius:12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
    <h2 style="margin-top:0;">Comenzile mele</h2>

    <div th:if="${mesajSucces}" style="color: green; margin-bottom: 12px;">
        <b th:text="${mesajSucces}"></b>
    </div>

    <div th:if="${eroareText}" style="color: rgb(156, 17, 17); margin-bottom: 12px;">
        <b th:text="${eroareText}"></b>
    </div>

    <div th:if="${#lists.isEmpty(lista)}" style="color:#555;">
        Nu ai comenzi inregistrate.
    </div>

    <div th:each="c : ${lista}" style="background:#fafafa; border:1px solid #eee; border-radius:12px; padding:14px; margin-bottom:12px;">
        <div style="display:flex; justify-content:space-between; gap:12px;">
            <div>
                <div><b>Tip:</b> <span th:text="${c.tipDispozitiv}"></span></div>
                <div><b>Categorie:</b> <span th:text="${c.departamentDenumire}"></span></div>
                <div><b>Producator:</b> <span th:text="${c.producator} ?: '-'"></span></div>
                <div><b>Model:</b> <span th:text="${c.model} ?: '-'"></span></div>
                <div><b>Serie:</b> <span th:text="${c.serie} ?: '-'"></span></div>
                <div><b>Defect:</b> <span th:text="${c.defectDispozitiv}"></span></div>
                <div><b>Data primire:</b> <span th:text="${c.dataPrimire}"></span></div>
                <div><b>Status:</b> <span th:text="${c.status}"></span></div>
                <div><b>Metoda plata:</b> <span th:text="${c.metodaDePlata}"></span></div>
            </div>

            <div style="min-width:220px; display:flex; flex-direction:column; gap:8px;">
                <!-- Editare: doar daca status Trimisa -->
                <a th:if="${c.esteEditabila()}" th:href="@{'/client/comenzi/' + ${c.comandaId} + '/edit'}"
                   style="text-align:center; padding:10px; border-radius:10px; background:#1976d2; color:white; text-decoration:none;">
                    Editare comanda
                </a>

                <div th:if="${!c.esteEditabila()}" style="text-align:center; padding:10px; border-radius:10px; background:#ccc; color:#333;">
                    Editare indisponibila
                </div>

                <!-- Stergere: doar daca status Trimisa -->
                <form th:if="${c.esteEditabila()}" th:action="@{'/client/comenzi/' + ${c.comandaId} + '/sterge'}" method="post"
                      onsubmit="return confirm('Sunteti sigur ca doriti sa stergeti comanda?');">
                    <button type="submit"
                            style="width:100%; padding:10px; border:none; border-radius:10px; background:#c62828; color:white; cursor:pointer;">
                        Sterge comanda
                    </button>
                </form>

                <div th:if="${!c.esteEditabila()}" style="text-align:center; padding:10px; border-radius:10px; background:#eee; color:#666;">
                    Nu se poate sterge
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top:14px; text-align:center;">
        <a th:href="@{/client/panou}" style="text-decoration:none;">Inapoi la panou</a>
    </div>
</div>

</body>
</html>
